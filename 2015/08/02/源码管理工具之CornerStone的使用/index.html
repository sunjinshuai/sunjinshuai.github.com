<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 源码管理工具之CornerStone的使用 · 孙金帅的技术博客</title><meta name="description" content="源码管理工具之CornerStone的使用 - sunjinshuai"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://sunjinshuai.github.io/atom.xml" title="孙金帅的技术博客"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/sunjinshuai" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/sunjinshuai" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">源码管理工具之CornerStone的使用</h1><div class="post-info">2015年8月2日</div><div class="post-content"><blockquote>
<p>俗话说：“工欲善其事必先利其器”；</p>
</blockquote>
<p>对于我们程序员来说，不管你是大神，还是小鱼小虾，进入公司之后，都用过源码管理工具，不然你就不是一个合格的程序员，现在各个公司用于源码管理工具通常有下面两种：</p>
<ul>
<li>git：使用git的公司应该是最多的。</li>
<li>svn：现在使用svn的公司比重也挺大的，但是svn有局限性。</li>
</ul>
<p>当然，他们两者的区别，在这里就不做解释了，一般选择用什么源码管理工具，一般会是整个项目的负责人来选择。<br>在iOS开发中，最好用的svn的Mac版源码管理工具就是<code>Cornerstone</code>，下面介绍<code>CornerStone</code>的使用：</p>
<h4 id="一、安装"><a href="#一、安装" class="headerlink" title="一、安装"></a>一、安装</h4><p><code>CornerStone</code>是收费，如果是公司需要使用到，建议让公司购买软件使用版权，支持正版，当然网上也是有破解版本的。<a href="https://pan.baidu.com/s/1mhU7yTq" target="_blank" rel="external">破解版</a>，提取密码(p48z)。</p>
<h4 id="二、配置SVN"><a href="#二、配置SVN" class="headerlink" title="二、配置SVN"></a>二、配置SVN</h4><p><img src="http://upload-images.jianshu.io/upload_images/588630-8d4bf8bbbc0a28d7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>
<p>打开<code>Cornerstone</code>，点击“+”号，添加一个仓库。<br><img src="http://upload-images.jianshu.io/upload_images/588630-c58c78cf39769e4e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">https://192.168.1.11:443/svn/FXBest</div></pre></td></tr></table></figure>
<ul>
<li>Protocol：分为HTTP和HTTPS，如果公司给你服务器地址是HTTPS的话，就选择HTTPS，反之，就选择HTTP。</li>
<li><p>Server：填写服务器地址，例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">192.168.1.11</div></pre></td></tr></table></figure>
</li>
<li><p>Port：服务器地址中端口号，当然有时候是不需要填写的，使用默认的就可以了，例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">192.168.1.11:443</div></pre></td></tr></table></figure>
</li>
<li><p>Repository path：svn仓库的访问路径</p>
</li>
<li>NickName：仓库显示的名称</li>
<li>用户名</li>
<li>密码</li>
</ul>
<p>注意：<br>1、填写好之后，会自动生成，这样的一串路径。如果你填写完之后不是这种svn://用户名@主机地址:端口号/路径的格式，则说明填写有误。例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">https://michael@192.168.1.11:443/svn/iOS</div></pre></td></tr></table></figure></p>
<p>2、小技巧，一般进入公司，项目负责人会给你开svn的账号，然后会把svn的路径发给你，拿到这串路径，直接复制一下，然后切换到<code>CornerStone</code>，发现svn的路径会自动填充到<code>CornerStone</code>上面。</p>
<h4 id="三、基本使用"><a href="#三、基本使用" class="headerlink" title="三、基本使用"></a>三、基本使用</h4><p>1、上传项目到远端仓库repository<br>可以直接将文件或者文件夹拖到repository的子文件夹中，或是选择软件上方的Import按钮上传，会弹出选项填写所在位置及名称，然后选择Import即可。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/588630-58d24a6615484248.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>
<p>2、下载项目</p>
<p><img src="http://upload-images.jianshu.io/upload_images/588630-cdb6d44ad35cf50c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>
<p>注意：下载项目，一般分为Export和Check Out。<br>他们的区别在于：</p>
<ul>
<li><code>Export</code>后的项目不会与repository中的源文件相关联，是一个独立的版本。</li>
<li><code>Check Out</code>下来的文件会创建一个working copy，此文件与repository中源文件相关联，当有别人修改或是自己修改时，working copy会显示修改数量，白色数量为别人修改数量，灰色数量为自己修改数量，所以如果你是项目中的开发人员，可以选择<code>check out</code>。</li>
<li>如果只是下载查看，不希望自己的修改影响到整个项目，最好是选<code>Export</code>。</li>
</ul>
<p>3、版本管理<br>每一次提交会创建一个新版本，在repository中会保存所有历史版本，可通过修改人及提交信息进行检索版本，所以用svn开发可以很好的控制项目出现不可解决及未知bug时代码的修复问题，例如：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/588630-2899e643efd55075.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>
<p>注意事项：</p>
<ul>
<li>先更新后提交，当你看到你<code>check out</code>下来的项目有白色圈时，说明有人已经提交了代码，这个时候，你应该先update一下，直至working copy不再显示白色圈，然后运行一下项目，确保项目没有冲突或者丢失的文件，然后在commit自己的代码。否则，会造成项目中出现多处冲突或者覆盖掉别人提交的代码。</li>
<li>在项目开发阶段，最好每次开发完一个独立的功能，或者在测试阶段，解决一个bug之后再提交代码到svn，不要连续多次重复提交，造成版本过多过杂。并且每次提交时务必填写提交信息，方便查看历史版本。</li>
</ul>
<p>小技巧(svn ignores的使用):<br>在项目中引入第三库，在本地运行项目，发现没有任何问题，但是提交到svn，其他人update之后，在运行项目发现报错，很有可能是静态文件没有上传到svn造成的。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/588630-77a24a91a542e166.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="屏幕快照 2016-07-16 下午12.02.16.png"></p>
<p>选择Preferences</p>
<p><img src="http://upload-images.jianshu.io/upload_images/588630-d2d2791b16c1d99b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>
<p>勾选Use default global ignores，删除.a后，点击save。<br>然后，会发现check out下来的项目中会有这些问号的文件存在(下面的图只是为了举例使用)，把这些带有问号的文件commit到svn，问题就解决了。<br><img src="http://upload-images.jianshu.io/upload_images/588630-8f4104c6a273c470.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"><br>注意：<br><strong>如果选择要忽略提交的文件之后，不要再把<code>Use default global ignores</code>选中，选中<code>Use default global ignores</code>的意思使用缺省的<code>ignores</code>。</strong></p>
<h4 id="四、CornerStone常见的图标含义"><a href="#四、CornerStone常见的图标含义" class="headerlink" title="四、CornerStone常见的图标含义"></a>四、CornerStone常见的图标含义</h4><p><img src="http://upload-images.jianshu.io/upload_images/588630-303b290c0b2c3eac.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"><br>如果，你想working copy下来的项目中做了修改，那么在修改之后的文件后面会有一个“M”的标志。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/588630-d5a606137ba9126f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"><br>如果，你想working copy下来的项目中新添加一个文件，那么新添加之后的文件后面会有一个“？”的标志，此时你需要点击add，添加到working copy下来的项目中，然后在commit。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/588630-8b6269e6f34ed652.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/588630-9bd6ffcba52705ea.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"><br>如果，你想working copy下来的项目中删除一个文件，那么删除之后的文件后面会有一个“D”的标志。</p>
<p>如果，你想working copy下来的项目中A和B同时修改了同一行代码然后commit到svn，那么冲突之后的文件后面会有一个“C”的标志。<br>ps：原则上同一组开发人员最好不要在同一文件中进行操作，但有时候必须去其他文件中进行操作，或者是误操作，如果同时多人在同一文件的同一位置修改代码，后提交的人会出现版本冲突文件，一般会有三个同样名称不同后缀的文件。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/588630-4c4bd6dd3af648a6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="20150531131942823.png"></p>
<p>其中.mine文件：本人所做修改，两个.r0XX文件：XX为数字，数字较小的为更改前的文件，较大的为更改后的文件，在文件中会有&lt;&lt;&lt;&lt; mine .r0XX和&gt;&gt;&gt;&gt;&gt;等字样包含起来的代码，即冲突的地方，此时请和组内同事讨论或自己删除某部分修改文件后进行调试，修复文件。</p>
<h4 id="五、创建分支和Tag"><a href="#五、创建分支和Tag" class="headerlink" title="五、创建分支和Tag"></a>五、创建分支和Tag</h4><p><img src="http://upload-images.jianshu.io/upload_images/588630-323fb2612f2a0c2c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/588630-6aec248bbacf44dd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>
<ul>
<li>选择项目所在的远程仓库 </li>
<li>选择要创建分支的项目 </li>
<li>右键或者点击上图选择Branch </li>
<li>选择分支存放的路径<br>注意：<br>Branch As：分支的名称<br>Where：把分支存放在什么位置<br>Tag同Branch一样</li>
</ul>
<h4 id="六、Merge"><a href="#六、Merge" class="headerlink" title="六、Merge"></a>六、Merge</h4><p><img src="http://upload-images.jianshu.io/upload_images/588630-8f46ea1c0d11d539.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>
<p>如果两个分支需要合并到主干，Checkout到本地，点击需要合并到的项.<br>点击Merge<br>点击Sychronize Branch：选择需要从被合并的项目（merge from）合并到这里，然后提交就可以了（如果同时有两个分支，最需仍需要在分支上修改的话，先合并一个分支到主干，然后主干在合并到另一个分支，修改冲突后提交，前提是，刚开始主干和两个分支的代码一样，参考上边的步骤生成）<br>注意：<br>1.在workcopying中选择目标copying，然后点击Merge，如图所示<br>2.选择Mergefrom的copying<br>3.Merge之前cornerstone会进行dry run，进行merge分析和预览<br>4.确认无误后Merge Changes （该操作是本地操作，注意解决冲突后在commit）</p>
<h4 id="七、cornerStone错误异常处理"><a href="#七、cornerStone错误异常处理" class="headerlink" title="七、cornerStone错误异常处理"></a>七、cornerStone错误异常处理</h4><p>1、<img src="http://upload-images.jianshu.io/upload_images/588630-08e8c3600b1ce750.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="1272323-46573a888e452b07.jpg"><br>主要是由于你操作异常导致的,解决方案是,把生成的错误文件删除,然后在重新安装一下就可以了。<br><img src="http://upload-images.jianshu.io/upload_images/588630-a1ebe29db3f9ec40.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="1272323-91a005057575e393.jpg"><br>把红色箭头部分的文件删除就可以了。</p>
<p>2、</p>
<p><img src="http://upload-images.jianshu.io/upload_images/588630-aa25715016f7b24d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"><br>本地代码版本号与服务器当前最新版本号不一致导致<br>点击update to latest，更新服务器最新的就可以了。</p>
<p>先写这么多，以后遇到问题会有更新。</p>
</div></article></div></main><footer><div class="paginator"><a href="/2015/10/05/iOS学习笔记-第1期-2015-10-05/" class="prev">上一篇</a><a href="/2015/05/05/Object-C编码规范/" class="next">下一篇</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'sunjinshuai';
var disqus_identifier = '2015/08/02/源码管理工具之CornerStone的使用/';
var disqus_title = '源码管理工具之CornerStone的使用';
var disqus_url = 'https://sunjinshuai.github.io/2015/08/02/源码管理工具之CornerStone的使用/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//sunjinshuai.disqus.com/count.js" async></script><div class="copyright"><p>© 2015 - 2017 <a href="https://sunjinshuai.github.io">sunjinshuai</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>