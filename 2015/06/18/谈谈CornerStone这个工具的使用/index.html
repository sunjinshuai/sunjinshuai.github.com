<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 谈谈CornerStone这个工具的使用 · 孙金帅的技术博客</title><meta name="description" content="谈谈CornerStone这个工具的使用 - sunjinshuai"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://sunjinshuai.github.io/atom.xml" title="孙金帅的技术博客"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/sunjinshuai" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/sunjinshuai" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">谈谈CornerStone这个工具的使用</h1><div class="post-info">2015年6月18日</div><div class="post-content"><blockquote>
<p>俗话说：“工欲善其事必先利其器”；</p>
</blockquote>
<p>对于我们程序员来说，不管你是大神，还是小鱼小虾，进入公司之后，都用过源码管理工具，不然你就不是一个合格的程序员，现在各个公司用于源码管理工具通常有下面两种：</p>
<ul>
<li><code>git</code>：使用<code>git</code>的公司应该是最多的。</li>
<li><code>svn</code>：现在使用<code>svn</code>的公司比重也挺大的，但是<code>svn</code>有局限性。</li>
</ul>
<p>当然，他们两者的区别，在这里就不做解释了，一般选择用什么源码管理工具，一般会是整个项目的负责人来选择。<br>在<code>iOS</code>开发中，最好用的<code>svn</code>的<code>Mac</code>版源码管理工具就是<code>Cornerstone</code>，下面介绍<code>CornerStone</code>的使用：</p>
<h4 id="一、安装"><a href="#一、安装" class="headerlink" title="一、安装"></a>一、安装</h4><p><code>CornerStone</code>是收费，如果是公司需要使用到，建议让公司购买软件使用版权，支持正版，当然网上也是有破解版本的。<a href="https://pan.baidu.com/s/1bo3LYOJ" target="_blank" rel="external">破解版</a>，提取密码(<code>ggmk</code>)，如果下载成功需要输入密码(<code>www.ifunmac.com</code>)。</p>
<h4 id="二、配置SVN"><a href="#二、配置SVN" class="headerlink" title="二、配置SVN"></a>二、配置SVN</h4><p><img src="https://user-gold-cdn.xitu.io/2017/12/17/16062746649457c7?w=1080&amp;h=639&amp;f=png&amp;s=276699" alt="Paste_Image.png"></p>
<p>首先，打开<code>Cornerstone</code>，点击”<code>+</code>“号，添加一个仓库，选中<code>HTTP Server</code>。<br><img src="https://user-gold-cdn.xitu.io/2017/12/17/160627467668694d?w=480&amp;h=575&amp;f=png&amp;s=103327" alt="Paste_Image.png"></p>
<p>例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">https://192.168.1.11:443/svn/FXBest</div></pre></td></tr></table></figure>
<ul>
<li><code>Protocol</code>：分为<code>HTTP</code>和<code>HTTPS</code>，如果公司的服务器地址是<code>HTTPS</code>选择<code>HTTPS</code>，反之，选择<code>HTTP</code>。</li>
<li><code>Server</code>：填写服务器地址。</li>
</ul>
<p>例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">192.168.1.11</div></pre></td></tr></table></figure>
<ul>
<li><code>Port</code>：服务器地址中端口号。</li>
</ul>
<p>例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">192.168.1.11:443</div></pre></td></tr></table></figure>
<ul>
<li><code>Repository path</code>：<code>svn</code>仓库的访问路径。</li>
<li><code>NickName</code>：仓库显示的名称。</li>
<li><code>Name</code>：用户名</li>
<li><code>Password</code>：密码</li>
</ul>
<p>注意：</p>
<ul>
<li>填写好之后，会自动生成，这样的一串路径。如果你填写完之后不是这种<code>svn://用户名@主机地址:端口号/路径</code>的格式，则说明填写有误。</li>
</ul>
<p>例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">https://michael@192.168.1.11:443/svn/iOS</div></pre></td></tr></table></figure></p>
<p>小技巧，一般进入公司，项目负责人会给你开<code>svn</code>的账号，然后会把<code>svn</code>的路径发给你，拿到这串路径，直接复制一下，然后切换到<code>CornerStone</code>，发现<code>svn</code>的路径会自动填充到<code>CornerStone</code>上面。</p>
<h4 id="三、基本使用"><a href="#三、基本使用" class="headerlink" title="三、基本使用"></a>三、基本使用</h4><p>1、上传项目到远端仓库<code>repository</code><br>可以直接将文件或者文件夹拖到<code>repository</code>的子文件夹中，或是选择软件上方的<code>Import</code>按钮上传，会弹出选项填写所在位置及名称，然后选择<code>Import</code>即可。</p>
<p><img src="https://user-gold-cdn.xitu.io/2017/12/17/160627467658d1a1?w=538&amp;h=493&amp;f=png&amp;s=104331" alt="Paste_Image.png"></p>
<p>2、下载项目</p>
<p><img src="https://user-gold-cdn.xitu.io/2017/12/17/16062746a6d9ef29?w=1080&amp;h=639&amp;f=png&amp;s=280876" alt="Paste_Image.png"></p>
<p>注意：</p>
<p>下载项目，一般分为<code>Export</code>和<code>Check Out</code>。</p>
<ul>
<li><code>Export</code>后的项目不会与<code>repository</code>中的源文件相关联，是一个独立的版本。</li>
<li><code>Check Out</code>下来的文件会创建一个<code>working copy</code>，此文件与<code>repository</code>中源文件相关联，当有别人修改或是自己修改时，<code>working copy</code>会显示修改数量，白色数量为别人修改数量，灰色数量为自己修改数量，所以如果你是项目中的开发人员，可以选择<code>check out</code>。</li>
<li>如果只是下载查看，不希望自己的修改影响到整个项目，最好是选<code>Export</code>。</li>
</ul>
<p>3、版本管理<br>每一次提交会创建一个新版本，在<code>repository</code>中会保存所有历史版本，可通过修改人及提交信息进行检索版本，所以用<code>svn</code>开发可以很好的控制项目出现不可解决及未知<code>bug</code>时代码的修复问题。</p>
<p>例如：</p>
<p><img src="https://user-gold-cdn.xitu.io/2017/12/17/16062746a6c57d9d?w=1080&amp;h=639&amp;f=png&amp;s=193890" alt="Paste_Image.png"></p>
<p>注意事项：</p>
<ul>
<li>先更新后提交，当你看到你<code>check out</code>下来的项目有白色圈时，说明有人已经提交了代码，这个时候，你应该先<code>update</code>一下，直至<code>working copy</code>不再显示白色圈，然后运行一下项目，确保项目没有冲突或者丢失的文件，然后在<code>commit</code>自己的代码。否则，会造成项目中出现多处冲突或者覆盖掉别人提交的代码。</li>
<li>在项目开发阶段，最好每次开发完一个独立的功能，或者在测试阶段，解决一个<code>bug</code>之后再提交代码到<code>svn</code>，不要连续多次重复提交，造成版本过多过杂。并且每次提交时务必填写提交信息，方便查看历史版本。</li>
</ul>
<p>小技巧(<code>svn ignores</code>的使用)</p>
<p>在项目中引入第三库，在本地运行项目，发现没有任何问题，但是提交到<code>svn</code>，其他人<code>update</code>之后，在运行项目发现报错，很有可能是静态文件没有上传到<code>svn</code>造成的。</p>
<p><img src="https://user-gold-cdn.xitu.io/2017/12/17/16062746a6b8c9dd?w=1240&amp;h=773&amp;f=png&amp;s=269417" alt="屏幕快照 2016-07-16 下午12.02.16.png"></p>
<p>选择<code>Preferences</code></p>
<p><img src="https://user-gold-cdn.xitu.io/2017/12/17/16062746ae7c1657?w=575&amp;h=676&amp;f=png&amp;s=148290" alt="Paste_Image.png"></p>
<p>勾选<code>Use default global ignores</code>，删除<code>.a</code>后，点击<code>save</code>。<br>然后，会发现<code>check out</code>下来的项目中会有这些问号的文件存在，把这些带有问号的文件<code>commit</code>到<code>svn</code>，问题就解决了。<br><img src="https://user-gold-cdn.xitu.io/2017/12/17/16062746cfe2adf9?w=1240&amp;h=757&amp;f=png&amp;s=360176" alt="Paste_Image.png"></p>
<p>注意：</p>
<p><strong>如果选择要忽略提交的文件之后，不要再把<code>Use default global ignores</code>选中，选中<code>Use default global ignores</code>的意思使用缺省的<code>ignores</code>。</strong></p>
<h4 id="四、CornerStone常见的图标含义"><a href="#四、CornerStone常见的图标含义" class="headerlink" title="四、CornerStone常见的图标含义"></a>四、CornerStone常见的图标含义</h4><p><img src="https://user-gold-cdn.xitu.io/2017/12/17/16062746cfcee4ad?w=1080&amp;h=639&amp;f=png&amp;s=269758" alt="Paste_Image.png"><br><code>check out</code> 下来的项目中做了修改，那么在修改之后的文件后面会有一个”<code>M</code>“的标志。</p>
<p><img src="https://user-gold-cdn.xitu.io/2017/12/17/16062746d4977f25?w=1080&amp;h=639&amp;f=png&amp;s=270103" alt="Paste_Image.png"></p>
<p><code>check out</code> 下来的项目中做了修改，新添加一个文件，那么新添加之后的文件后面会有一个 <code>？</code> 的标志，此时你需要点击<code>add</code>，添加到项目中，然后在<code>commit</code>。</p>
<p><img src="https://user-gold-cdn.xitu.io/2017/12/17/16062746d465d364?w=1080&amp;h=639&amp;f=png&amp;s=226557" alt="Paste_Image.png"></p>
<p><img src="https://user-gold-cdn.xitu.io/2017/12/17/16062746fd128927?w=1080&amp;h=639&amp;f=png&amp;s=248280" alt="Paste_Image.png"><br><code>check out</code> 下来的项目中做了修改，删除一个文件，那么删除之后的文件后面会有一个 “<code>D</code>“ 的标志。</p>
<p><code>check out</code> 下来的项目中，如果<code>A</code>和<code>B</code>同时修改了同一行代码然后<code>commit</code>到<code>svn</code>，那么冲突之后的文件后面会有一个 “<code>C</code>“的标志。</p>
<p>注意：</p>
<p>原则上同一组开发人员最好不要在同一文件中进行操作，但有时候必须去其他文件中进行操作，或者是误操作，如果同时多人在同一文件的同一位置修改代码，后提交的人会出现版本冲突文件，一般会有三个同样名称不同后缀的文件。</p>
<p><img src="https://user-gold-cdn.xitu.io/2017/12/17/16062746fd4eacaa?w=1240&amp;h=723&amp;f=png&amp;s=217977" alt="20150531131942823.png"></p>
<p>其中<code>.mine</code>文件：本人所做修改，两个<code>.r0XX</code>文件：<code>XX</code>为数字，数字较小的为更改前的文件，较大的为更改后的文件，在文件中会有<code>&lt;&lt;&lt;&lt; mine .r0XX</code>和<code>&gt;&gt;&gt;&gt;&gt;</code>等字样包含起来的代码，即冲突的地方，此时请和组内同事讨论或自己删除某部分修改文件后进行调试，修复文件。</p>
<h4 id="五、创建分支和Tag"><a href="#五、创建分支和Tag" class="headerlink" title="五、创建分支和Tag"></a>五、创建分支和Tag</h4><p><img src="https://user-gold-cdn.xitu.io/2017/12/17/16062746fd323e14?w=1080&amp;h=639&amp;f=png&amp;s=288532" alt="Paste_Image.png"></p>
<p><img src="https://user-gold-cdn.xitu.io/2017/12/17/160627470556bde0?w=473&amp;h=200&amp;f=png&amp;s=28748" alt="Paste_Image.png"></p>
<ul>
<li>选择项目所在的远程仓库</li>
<li>选择要创建分支的项目</li>
<li>右键或者点击上图选择<code>Branch</code></li>
<li>选择分支存放的路径</li>
</ul>
<p>注意：</p>
<ul>
<li>Branch As：分支的名称</li>
<li>Where：把分支存放在什么位置</li>
<li>Tag同Branch一样</li>
</ul>
<h4 id="六、Merge"><a href="#六、Merge" class="headerlink" title="六、Merge"></a>六、Merge</h4><p><img src="https://user-gold-cdn.xitu.io/2017/12/17/160627473db4da00?w=1080&amp;h=639&amp;f=png&amp;s=273661" alt="Paste_Image.png"></p>
<p>如果两个分支需要合并到主干，<code>Checkout</code>到本地，点击需要合并到的项。<br>点击<code>Merge</code><br>点击<code>Sychronize Branch</code>：选择需要从被合并的项目(<code>merge from</code>)合并到这里，然后提交就可以了(如果同时有两个分支，最需仍需要在分支上修改的话，先合并一个分支到主干，然后主干在合并到另一个分支，修改冲突后提交，前提是，刚开始主干和两个分支的代码一样，参考上边的步骤生成)。</p>
<p>注意：</p>
<ul>
<li>在<code>workcopying</code>中选择目标<code>copying</code>，然后点击<code>Merge</code>，如图所示</li>
<li>选择<code>Mergefrom</code>的<code>copying</code></li>
<li><code>Merge</code>之前<code>cornerstone</code>会进行<code>dry run</code>，进行<code>merge</code>分析和预览</li>
<li>确认无误后<code>Merge Changes</code>(该操作是本地操作，注意解决冲突后在<code>commit</code>)</li>
</ul>
<p>七、cornerStone错误异常处理</p>
<ul>
<li><p>An error occurred and the operation could not be completed.<br><img src="https://user-gold-cdn.xitu.io/2017/12/17/160627473dae5af7?w=840&amp;h=296&amp;f=jpeg&amp;s=19343" alt="1272323-46573a888e452b07.jpg"><br>主要是由于你操作异常导致的,解决方案是,把生成的错误文件删除,然后在重新安装一下就可以了。<br><img src="https://user-gold-cdn.xitu.io/2017/12/17/160627473d980d16?w=1240&amp;h=709&amp;f=jpeg&amp;s=96917" alt="1272323-91a005057575e393.jpg"><br>把红色箭头部分的文件删除就可以了。</p>
</li>
<li><p>Some of the items in this working copy are out-of-date</p>
</li>
</ul>
<p><img src="https://user-gold-cdn.xitu.io/2017/12/17/16062747d60fa7fd?w=420&amp;h=151&amp;f=png&amp;s=42063" alt="Paste_Image.png"><br>本地代码版本号与服务器当前最新版本号不一致导致<br>点击<code>update to latest</code>，更新服务器最新的就可以了。</p>
<p>先写这么多，以后遇到问题会有更新。</p>
</div></article></div></main><footer><div class="paginator"><a href="/2015/07/05/block系列之block基础/" class="prev">上一篇</a><a href="/2015/05/05/Object-C编码规范/" class="next">下一篇</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'sunjinshuai';
var disqus_identifier = '2015/06/18/谈谈CornerStone这个工具的使用/';
var disqus_title = '谈谈CornerStone这个工具的使用';
var disqus_url = 'https://sunjinshuai.github.io/2015/06/18/谈谈CornerStone这个工具的使用/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//sunjinshuai.disqus.com/count.js" async></script><div class="copyright"><p>© 2015 - 2017 <a href="https://sunjinshuai.github.io">sunjinshuai</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>